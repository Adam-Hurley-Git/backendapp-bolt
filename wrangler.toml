#:schema node_modules/wrangler/config-schema.json
name = "chrome-extension-backend"
compatibility_date = "2025-03-25"
compatibility_flags = ["nodejs_compat"]

# Important: The main field points to the built worker
# This will be generated by @opennextjs/cloudflare
main = ".open-next/worker.js"

# For Cloudflare Pages deployment
pages_build_output_dir = ".open-next/assets"

# Assets configuration - must use ASSETS as binding name
[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# Environment variables for Cloudflare Pages
# Add these in the Cloudflare dashboard under Settings > Environment Variables
# Required variables:
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY
# - SUPABASE_SERVICE_ROLE_KEY
# - PADDLE_VENDOR_ID
# - PADDLE_VENDOR_AUTH_CODE
# - PADDLE_PUBLIC_KEY
# - PADDLE_WEBHOOK_SECRET
# - NEXTAUTH_URL
# - NEXTAUTH_SECRET
# - JWT_SECRET
# - ADMIN_EMAIL

# Workers configuration
[placement]
mode = "smart"

# Optional: Add custom domains here after deployment
# [[route]]
# pattern = "yourdomain.com"
# custom_domain = true
